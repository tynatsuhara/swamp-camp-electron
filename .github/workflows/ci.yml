# This workflow is the entry point for all CI processes.
# It is from here that all other workflows are launched.
on:
    workflow_dispatch:
    push:
        branches:
            - main
        paths:
            - "package.json"

concurrency:
    group: ci-${{ github.ref }}
    cancel-in-progress: false

jobs:
    # tests:
    # uses: ./.github/workflows/tests.yml
    draft_release:
        with:
            dry-run: ${{ github.event_name != 'push' || github.ref_name != 'main' }}
        needs: [] # [tests]
        uses: ./.github/workflows/release.yml
        secrets: inherit
